## 1.4 Методы

Начиная с версии 3.0 класс-клиент библиотеки ``IntRtl`` отмечен как устаревший. 
Вместо него необходимо использовать экземпляр ``AiletClient``.
Методы нового клиента концептуально соответствуют
[методам устаревшего клиента](https://github.com/intrtl/AiletLibraryExamples/blob/master/Android/IrLibExample/readme.md#методы):

Метод  | Описание
--- | ---
[init](#метод-init) | Инициализация библиотеки, авторизация пользователя и загрузка справочников.
[start](#метод-start) | Старт визита.
[reports](#метод-reports) | Возвращает отчет по указанному визиту.
[showSummaryReport](#метод-showsummaryreport) | Сводный отчет по указанному визиту.
[setPortal](#метод-setportal) | Установка активного портала.

Для удобства перехода на новый клиент, в аннотацию Deprecated каждого метода ``IntRtl`` добавлены блоки ``ReplaceWith``, позволяющие автоматически заменить старый метод на новый с помощью подсказок Android Studio.

Тем не менее, между старым и новым клиентами есть несколько существенных отличий:

1. Методы клиента теперь не являются блокирующими. Вызов каждого из них возвращает объект ``AiletCall``, который, в свою очередь, можно выполнить либо синхронно с помощью метода ``executeBlocking()``, либо асинхронно с помощью метода ``execute()``.

    До версии 3.0.0:

    ```kotlin
    client.setPortal(portalName)
    ```

    Начиная с версии 3.0.0:

    ```kotlin
    Ailet.getClient()
            .setPortal(portalName)
            .execute({ result -> 
                when(result) {
                    // обработка результата
                }
            }, { throwable -> 
                // обработка ошибки
            })
    ```
2. Блокирующее выполнение методов также возможно, но в этом случае ответственность за выбор правильного потока исполнения ложится на пользователя библиотеки.

    ```kotlin
    val result = Ailet.getClient()
            .setPortal(portalName)
            .executeBlocking()
    ```

### 1.4.1 Инициализация библиотеки. Метод init()

Данный метод отвечает за авторизацию пользователя в библиотеке, а также за инициализацию самой библиотеки Ailet Lib и загрузку справочников, необходимых для работы модуля.

Параметр | Тип | Описание | Обязательный | По умолчанию
---------|-----|----------|:---------:|:-----------------:
login           |String      | Логин пользователя в системе Ailet.      | + | 
password        |String      | Пароль пользователя в системе Ailet.     | + | 
externalUserId  |String      | Внешний идентификатор пользователя (ID пользователя из внешней системы). | | null 
multiPortalMode |Boolean     | Поддержка мультипортальности.            | | true 
server          |AiletServer | Сервер, на который выполняется вход.     | | null 

### 1.4.2 Начало визита. Метод start()

Метод запускает съемку в рамках визита.

Параметр | Тип | Описание | Обязательный | По умолчанию
---------|-----|----------|:-:|:-:
storeId         |AiletMethodStart.StoreId      | Идентификатор в системе Ailet.        | + | 
externalVisitId |String      | Внешний идентификатор визита.     |  | null
sceneGroupId    |Int         | Идентификатор группы сцен.            | | null 
sessionID       |String      | Внешний идентификатор задачи (ID задачи из внешней системы).         | | null 

### 1.4.3 Получение отчета по визиту. Метод getReportForVisit()

Метод возвращает отчет по визиту в формате `json`.

Параметр | Тип | Описание | Обязательный 
---------|-----|----------|:-:
externalVisitId | String | Внешний идентификатор визита. | +  

### 1.4.4 Отображение сводного отчета по визиту. Метод showSummaryReport()

Метод открывает экран просмотра сводного отчета по визиту.

Параметр | Тип | Описание | Обязательный 
---------|-----|----------|:-:
externalVisitId | String | Внешний идентификатор визита. | +  

### 1.4.5 Выбор активного портала. Метод setPortal()

Метод используется для установки текущего портала в мультипортальном режиме.

Параметр | Тип | Описание | Обязательный 
---------|-----|----------|:-:
portalName | String | Идентификатор портала | + 

